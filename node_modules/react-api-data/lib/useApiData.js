"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var react_1 = require("react");
var react_redux_1 = require("react-redux");
var createApiDataBinding_1 = require("./helpers/createApiDataBinding");
var withApiData_1 = require("./withApiData");
var useApiData = function (endpointKey, params, instanceId) {
    if (instanceId === void 0) { instanceId = ''; }
    var bindingsStore = react_1.useRef(new createApiDataBinding_1.BindingsStore());
    var apiData = react_redux_1.useSelector(function (state) { return state.apiData; });
    var autoTrigger = withApiData_1.shouldAutoTrigger(apiData, endpointKey);
    var dispatch = react_redux_1.useDispatch();
    var binding = bindingsStore.current.getBinding(endpointKey, params, dispatch, instanceId, apiData);
    var request = binding.request;
    var networkStatus = request && request.networkStatus;
    if (autoTrigger && networkStatus === 'ready') {
        binding.perform(params);
    }
    return binding;
};
exports.default = useApiData;
//# sourceMappingURL=useApiData.js.map